<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jhta.mybatis.StoresMapper">
	<select id="myPositionList" parameterType="hashmap" resultType="storeslist">
		select s.*, i.sto_img
		from stores s, category c, sto_image i
		where s.cat_num=c.cat_num and s.sto_num=i.sto_num and c.cat_num=#{cat_num} and s.sto_state='승인'
		and s.sto_num in(select sto_num from able_location where able_loc=#{able_loc})
	</select>
	<select id="minStoNum" parameterType="int" resultType="int">
		select nvl(min(sto_num), 0) from stores where sel_num = #{sel_num} and sto_state='승인'
	</select>
	<select id="stoList" parameterType="int" resultType="stores">
		select * from stores where sel_num = #{sel_num} and sto_state='승인'
	</select>
	<select id="storemenu" resultType="storemenu" parameterType="int">
		select sto_name,s.sto_num,sto_intro,m.men_name,m.men_price from stores s,(select * from menu where men_state='가능')m where s.sto_num=m.sto_num and s.sto_num=#{sto_num}
	</select>
</mapper>